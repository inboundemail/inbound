module.exports={929549:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},983943:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},86103:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},945935:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},348629:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("@opentelemetry/api",()=>require("@opentelemetry/api"))},30331:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("path",()=>require("path"))},109175:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("node:stream",()=>require("node:stream"))},963018:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("buffer",()=>require("buffer"))},109651:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("stream",()=>require("stream"))},76569:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("node:events",()=>require("node:events"))},804713:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("util",()=>require("util"))},87485:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("child_process",()=>require("child_process"))},420467:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("events",()=>require("events"))},936121:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("node:util",()=>require("node:util"))},681635:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("node:http",()=>require("node:http"))},866098:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("node:https",()=>require("node:https"))},580767:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("node:buffer",()=>require("node:buffer"))},329295:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("crypto",()=>require("crypto"))},62445:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("http",()=>require("http"))},348388:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("https",()=>require("https"))},591032:function(e){var{g:r,__dirname:t,m:s,e:n}=e;s.exports=e.x("node:crypto",()=>require("node:crypto"))},909834:e=>{"use strict";var{g:r,__dirname:t}=e;e.s({DELIVERY_STATUS:()=>n.DELIVERY_STATUS,DELIVERY_TYPES:()=>n.DELIVERY_TYPES,DOMAIN_STATUS:()=>n.DOMAIN_STATUS,EMAIL_STATUS:()=>n.EMAIL_STATUS,ENDPOINT_TYPES:()=>n.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>n.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>n.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>n.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>n.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>n.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>n.WEBHOOK_STATUS,account:()=>s.account,apikey:()=>s.apikey,blockedEmails:()=>n.blockedEmails,domainDnsRecords:()=>n.domainDnsRecords,emailAddresses:()=>n.emailAddresses,emailDomains:()=>n.emailDomains,emailGroups:()=>n.emailGroups,endpointDeliveries:()=>n.endpointDeliveries,endpoints:()=>n.endpoints,parsedEmails:()=>n.parsedEmails,receivedEmails:()=>n.receivedEmails,sentEmails:()=>n.sentEmails,sesEvents:()=>n.sesEvents,session:()=>s.session,structuredEmails:()=>n.structuredEmails,subscriptions:()=>n.subscriptions,user:()=>s.user,userAccounts:()=>n.userAccounts,userOnboarding:()=>n.userOnboarding,verification:()=>s.verification,vipAllowedSenders:()=>n.vipAllowedSenders,vipConfigs:()=>n.vipConfigs,vipEmailAttempts:()=>n.vipEmailAttempts,vipPaymentSessions:()=>n.vipPaymentSessions,webhookDeliveries:()=>n.webhookDeliveries,webhooks:()=>n.webhooks});var s=e.i(594120),n=e.i(55379)},436754:e=>{"use strict";var{g:r,__dirname:t}=e;e.s({DELIVERY_STATUS:()=>s.DELIVERY_STATUS,DELIVERY_TYPES:()=>s.DELIVERY_TYPES,DOMAIN_STATUS:()=>s.DOMAIN_STATUS,EMAIL_STATUS:()=>s.EMAIL_STATUS,ENDPOINT_TYPES:()=>s.ENDPOINT_TYPES,PROVIDER_CONFIDENCE:()=>s.PROVIDER_CONFIDENCE,SENT_EMAIL_STATUS:()=>s.SENT_EMAIL_STATUS,SES_VERIFICATION_STATUS:()=>s.SES_VERIFICATION_STATUS,VIP_PAYMENT_STATUS:()=>s.VIP_PAYMENT_STATUS,WEBHOOK_FORMATS:()=>s.WEBHOOK_FORMATS,WEBHOOK_STATUS:()=>s.WEBHOOK_STATUS,account:()=>s.account,apikey:()=>s.apikey,blockedEmails:()=>s.blockedEmails,domainDnsRecords:()=>s.domainDnsRecords,emailAddresses:()=>s.emailAddresses,emailDomains:()=>s.emailDomains,emailGroups:()=>s.emailGroups,endpointDeliveries:()=>s.endpointDeliveries,endpoints:()=>s.endpoints,parsedEmails:()=>s.parsedEmails,receivedEmails:()=>s.receivedEmails,sentEmails:()=>s.sentEmails,sesEvents:()=>s.sesEvents,session:()=>s.session,structuredEmails:()=>s.structuredEmails,subscriptions:()=>s.subscriptions,user:()=>s.user,userAccounts:()=>s.userAccounts,userOnboarding:()=>s.userOnboarding,verification:()=>s.verification,vipAllowedSenders:()=>s.vipAllowedSenders,vipConfigs:()=>s.vipConfigs,vipEmailAttempts:()=>s.vipEmailAttempts,vipPaymentSessions:()=>s.vipPaymentSessions,webhookDeliveries:()=>s.webhookDeliveries,webhooks:()=>s.webhooks}),e.i(468686);var s=e.i(909834)},153364:function(e){var{g:r,__dirname:t,m:s,e:n}=e;"use strict";s.exports=e.r(68043).vendored["react-rsc"].ReactServerDOMTurbopackServerEdge},259495:function(e){"use strict";var{g:r,__dirname:t,m:s,e:n}=e,a=function(e){var r,t,s;return!!(r=e)&&"object"==typeof r&&(t=e,"[object RegExp]"!==(s=Object.prototype.toString.call(t))&&"[object Date]"!==s&&t.$$typeof!==i)},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function o(e,r){return!1!==r.clone&&r.isMergeableObject(e)?d(Array.isArray(e)?[]:{},e,r):e}function u(e,r,t){return e.concat(r).map(function(e){return o(e,t)})}function l(e){return Object.keys(e).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(r){return Object.propertyIsEnumerable.call(e,r)}):[])}function c(e,r){try{return r in e}catch(e){return!1}}function d(e,r,t){(t=t||{}).arrayMerge=t.arrayMerge||u,t.isMergeableObject=t.isMergeableObject||a,t.cloneUnlessOtherwiseSpecified=o;var s,n,i=Array.isArray(r);return i!==Array.isArray(e)?o(r,t):i?t.arrayMerge(e,r,t):(n={},(s=t).isMergeableObject(e)&&l(e).forEach(function(r){n[r]=o(e[r],s)}),l(r).forEach(function(t){c(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))||(c(e,t)&&s.isMergeableObject(r[t])?n[t]=(function(e,r){if(!r.customMerge)return d;var t=r.customMerge(e);return"function"==typeof t?t:d})(t,s)(e[t],r[t],s):n[t]=o(r[t],s))}),n)}d.all=function(e,r){if(!Array.isArray(e))throw Error("first argument should be an array");return e.reduce(function(e,t){return d(e,t,r)},{})},s.exports=d},374460:e=>{"use strict";var{g:r,__dirname:t}=e;e.s({extractEmailAddress:()=>u,extractEmailAddresses:()=>l,extractEmailDomain:()=>i,formatEmailAddress:()=>o,parseEmail:()=>n,sanitizeHtml:()=>a});var s=e.i(525050);async function n(e){try{let r=await (0,s.simpleParser)(e),t=e=>e?Array.isArray(e)?{text:e.map(e=>e.text||`${e.name||""} <${e.address||""}>`).join(", "),addresses:e.map(e=>({name:e.name||null,address:e.address||null}))}:e.value&&Array.isArray(e.value)?{text:e.text,addresses:e.value.map(e=>({name:e.name||null,address:e.address||null}))}:e.value?{text:e.text,addresses:[{name:e.value.name||null,address:e.value.address||null}]}:{text:e.text||`${e.name||""} <${e.address||""}>`,addresses:[{name:e.name||null,address:e.address||null}]}:null;return{messageId:r.messageId,date:r.date,subject:r.subject,from:t(r.from),to:t(r.to),cc:t(r.cc),bcc:t(r.bcc),replyTo:t(r.replyTo),inReplyTo:r.inReplyTo,references:Array.isArray(r.references)?r.references:r.references?[r.references]:void 0,textBody:r.text,htmlBody:r.html||void 0,raw:e,attachments:r.attachments?.map(e=>({filename:e.filename,contentType:e.contentType,size:e.size,contentId:e.contentId,contentDisposition:e.contentDisposition}))||[],headers:Object.fromEntries(r.headers),priority:r.priority}}catch(e){throw console.error("Error parsing email:",e),e}}function a(e){return e?e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").replace(/on\w+="[^"]*"/gi,"").replace(/on\w+='[^']*'/gi,"").replace(/javascript:/gi,"").replace(/vbscript:/gi,"").replace(/(?<!src=["'])data:(?!image\/)/gi,""):""}function i(e){let r=e.match(/@([^>]+)/);return r?r[1]:""}function o(e){let r=e.match(/^(.+?)\s*<(.+?)>$/);return r?{name:r[1].replace(/['"]/g,"").trim(),address:r[2].trim()}:{name:"",address:e.trim()}}function u(e){return e?"string"==typeof e?e:e.text?e.text:Array.isArray(e)&&e.length>0?e[0].text||e[0].address||"unknown":e.address?e.address:e.name?e.name:"unknown":"unknown"}function l(e){return e?"string"==typeof e?[e]:Array.isArray(e)?e.map(e=>e.text||e.address||"unknown"):e.text?[e.text]:e.address?[e.address]:[]:[]}},806972:function(e){var{g:r,__dirname:t,m:s,e:n}=e},636405:e=>{"use strict";var{g:r,__dirname:t}=e;e.s({POST:()=>i});var s=e.i(125427),n=e.i(783287),a=e.i(494642);async function i(e){console.log("ðŸ“¦ POST /api/v2/mail/bulk - Starting bulk update request");try{console.log("ðŸ” Validating request authentication");let{userId:r,error:t}=await (0,a.validateRequest)(e);if(!r)return console.log("âŒ Authentication failed:",t),s.NextResponse.json({error:t},{status:401});console.log("âœ… Authentication successful for userId:",r),console.log("ðŸ“ Parsing request body");let i=await e.json();if(console.log("ðŸ“‹ Bulk update data received:",{emailCount:i.emailIds?.length||0,updates:i.updates}),!i.emailIds||!Array.isArray(i.emailIds))return s.NextResponse.json({error:"emailIds must be an array"},{status:400});if(0===i.emailIds.length)return s.NextResponse.json({error:"At least one email ID must be provided"},{status:400});if(i.emailIds.length>100)return s.NextResponse.json({error:"Cannot update more than 100 emails at once"},{status:400});if(!i.updates||"object"!=typeof i.updates)return s.NextResponse.json({error:"updates object is required"},{status:400});if(void 0!==i.updates.isRead&&"boolean"!=typeof i.updates.isRead)return s.NextResponse.json({error:"updates.isRead must be a boolean"},{status:400});if(void 0!==i.updates.isArchived&&"boolean"!=typeof i.updates.isArchived)return s.NextResponse.json({error:"updates.isArchived must be a boolean"},{status:400});if(!i.updates.isRead&&!i.updates.isArchived&&!1!==i.updates.isRead&&!1!==i.updates.isArchived)return s.NextResponse.json({error:"At least one update field (isRead or isArchived) must be provided"},{status:400});for(let e of i.emailIds)if("string"!=typeof e||!e.trim())return s.NextResponse.json({error:"All email IDs must be non-empty strings"},{status:400});console.log("ðŸ”„ Calling bulkUpdateEmails function for userId:",r,"emailCount:",i.emailIds.length);let o=await (0,n.bulkUpdateEmails)(r,i.emailIds,i.updates);if(o.error)return console.log("ðŸ’¥ bulkUpdateEmails returned error:",o.error),s.NextResponse.json({error:o.error},{status:500});return console.log("âœ… Successfully bulk updated",o.data?.updatedCount||0,"emails for user:",r),s.NextResponse.json(o.data)}catch(e){return console.error("ðŸ’¥ Unexpected error in POST /api/v2/mail/bulk:",e),s.NextResponse.json({error:"Internal server error"},{status:500})}}},978989:e=>{"use strict";var{g:r,__dirname:t}=e;{e.s({patchFetch:()=>o,routeModule:()=>r,serverHooks:()=>l,workAsyncStorage:()=>t,workUnitAsyncStorage:()=>u});var s=e.i(854885),n=e.i(814689),a=e.i(25402),i=e.i(636405);let r=new s.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/v2/mail/bulk/route",pathname:"/api/v2/mail/bulk",filename:"route",bundlePath:""},resolvedPagePath:"[project]/app/api/v2/mail/bulk/route.ts",nextConfigOutput:"",userland:i}),{workAsyncStorage:t,workUnitAsyncStorage:u,serverHooks:l}=r;function o(){return(0,a.patchFetch)({workAsyncStorage:t,workUnitAsyncStorage:u})}}},993477:e=>{var{g:r,__dirname:t}=e;e.v(r=>Promise.all(["server/chunks/[root-of-the-server]__bb375c7f._.js","server/chunks/node_modules_10ae7a2d._.js"].map(r=>e.l(r))).then(()=>r(611487)))}};

//# sourceMappingURL=%5Broot-of-the-server%5D__fd834145._.js.map